function q(n){return n instanceof Element}function U(n,e){let t=e&&q(e)?e:document;return q(n)?n:t.querySelector(n)}function E(n,e){return U(n,e)}var Ae="addEventListener",N=Ae;var xe="removeEventListener",I=xe;var Ce=(()=>{let n=!1;try{let e=Object.defineProperty({},"passive",{get(){return n=!0,n}});document[N]("DOMContentLoaded",function t(){document[I]("DOMContentLoaded",t,e)},e)}catch{throw Error("Passive events are not supported")}return n})(),de=Ce;var Le=de?{passive:!0}:!1,K=Le;function S(n,e){n.classList.add(e)}function A(n,e){return n.classList.contains(e)}function p(n,e){n.classList.remove(e)}var Ne="aria-expanded",J=Ne;var Ie="show",m=Ie;var De="data-bs-toggle",_=De;var Te=["dropdown","dropup","dropstart","dropend"],g=Te;var ke="dropdown-menu",Q=ke;function L(n,e){let t=new CustomEvent(n,{cancelable:!0});return e instanceof Object&&Object.keys(e).forEach(s=>{Object.defineProperty(t,s,{value:e[s]})}),t}function P(n){let e=n.closest("A");return n&&(n.hasAttribute("href")&&n.href.slice(-1)==="#"||e&&e.hasAttribute("href")&&e.href.slice(-1)==="#")}function D(n){n.focus()}function j(n){return n==="true"?!0:n==="false"?!1:Number.isNaN(+n)?n===""||n==="null"?null:n:+n}var Oe=n=>Object.keys(n),V=Oe;function Y(n,e,t,s){let o={...n.dataset},i={},l={};return V(o).forEach(r=>{let h=s&&r.includes(s)?r.replace(s,"").replace(/[A-Z]/,c=>c.toLowerCase()):r;l[h]=j(o[r])}),V(t).forEach(r=>{t[r]=j(t[r])}),V(e).forEach(r=>{r in t?i[r]=t[r]:r in l?i[r]=l[r]:i[r]=e[r]}),i}var H=class{constructor(e,t,s,o){let i=this,l=E(t);l[e]&&l[e].dispose(),i.element=l,s&&Object.keys(s).length&&(i.options=Y(l,s,o||{},"bs")),l[e]=i}dispose(e){let t=this;t.element[e]=null,Object.keys(t).forEach(s=>{t[s]=null})}};var[u]=g,v="Dropdown",Z=`[${_}="${u}"]`,T=g[1],F=g[2],M=g[3],x=`${Q}-end`,ce=["d-block","invisible"],qe=[u,T],ue=[F,M],Pe={offset:5,display:"dynamic"},G=L(`show.bs.${u}`),fe=L(`shown.bs.${u}`),X=L(`hide.bs.${u}`),pe=L(`hidden.bs.${u}`);function ee(n,e){let{element:t,menu:s,originalClass:o,menuEnd:i,options:l}=n,{offset:r}=l,h=t.parentElement;if(["margin","top","bottom","left","right"].forEach(d=>{s.style[d]=""}),p(h,"position-static"),!e){let d=A(s,x);h.className=o.join(" "),d&&!i?p(s,x):!d&&i&&S(s,x);return}let a=g.find(d=>o.includes(d))||u,f={dropdown:[r,0,0],dropup:[0,0,r],dropstart:[-1,r,0],dropend:[-1,0,0,r]},O={dropdown:{top:"100%"},dropup:{top:"auto",bottom:"100%"},dropstart:{left:"auto",right:"100%"},dropend:{left:"100%",right:"auto"},menuEnd:{right:0,left:"auto"}};ce.forEach(d=>S(s,d));let we=new RegExp(`\\b(${u}|${T}|${F}|${M})+`),z={w:t.offsetWidth,h:t.offsetHeight},y={w:s.offsetWidth,h:s.offsetHeight},se=document.documentElement,ie=document.body,ne=se.clientWidth||ie.clientWidth,oe=se.clientHeight||ie.clientHeight,w=t.getBoundingClientRect(),Ee=w.left+z.w-y.w<0,re=w.left-y.w<0,Se=w.left+y.w>=ne,le=w.left+y.w+z.w>=ne,W=w.top+y.h>=oe,ae=w.top+y.h+z.h>=oe,he=w.top-y.h<0;ue.includes(a)&&re&&le&&(a=u),ue.includes(a)&&W&&(a=T),a===F&&re&&!W&&(a=M),a===M&&le&&!W&&(a=F),a===T&&he&&!ae&&(a=u),a===u&&ae&&!he&&(a=T),f=f[a],s.style.margin=`${f.map(d=>d&&`${d}px`).join(" ")}`,Object.keys(O[a]).forEach(d=>{s.style[d]=O[a][d]}),A(h,a)||(h.className=h.className.replace(we,a)),qe.includes(a)&&(!i&&Se?S(s,x):i&&Ee&&p(s,x),A(s,x)&&Object.keys(O.menuEnd).forEach(d=>{s.style[d]=O.menuEnd[d]})),ce.forEach(d=>p(s,d))}function me(n){let e=n.open?N:I;document[e]("click",ve),document[e]("focus",ve),document[e]("keydown",$e),document[e]("keyup",Ve),n.options.display==="dynamic"&&(window[e]("scroll",be,K),window[e]("resize",be,K))}function ge(n,e){let t=e?N:I;n.element[t]("click",je)}function te(){let n=g.concat("btn-group").map(e=>document.getElementsByClassName(`${e} ${m}`)).find(e=>e.length);return n&&n.length?Array.from(n[0].children).find(e=>e.hasAttribute(_)):null}function ve(n){let{target:e,type:t}=n;if(!e.closest)return;let s=te(),o=s&&s.parentNode,i=s&&s[v],l=i&&i.menu,r=e.closest(Z)!==null,h=o&&o.contains(e)&&(e.tagName==="form"||e.closest("form")!==null);t==="click"&&P(e)&&n.preventDefault(),!(t==="focus"&&(e===s||e===l||l.contains(e)))&&(h||r||i&&i.hide(s))}function je(n){let e=this;e[v].toggle(e),P(n.target)&&n.preventDefault()}function $e(n){(n.which===38||n.which===40)&&n.preventDefault()}function Ve({which:n}){let e=te(),t=e[v],{menu:s,menuItems:o,open:i}=t,l=document.activeElement,r=l===e,h=s.contains(l),c=l.parentNode===s||l.parentNode.parentNode===s,a=o.indexOf(l);c&&(r?a=0:n===38?a=a>1?a-1:0:n===40&&(a=a<o.length-1?a+1:a),o[a]&&D(o[a])),(o.length&&c||!o.length&&(h||r)||!h)&&i&&n===27&&t.toggle()}function be(){let n=te(),e=n&&n[v];e&&e.open&&ee(e,1)}var B=class extends H{constructor(e,t){super(v,e,Pe,t);let s=this,{element:o}=s,i=o.parentElement;s.menu=E(`.${Q}`,i);let{menu:l}=s;s.originalClass=Array.from(i.classList),s.menuEnd=A(l,x),s.menuItems=[],Array.from(l.children).forEach(r=>{r.children.length&&r.children[0].tagName==="A"&&s.menuItems.push(r.children[0]),r.tagName==="A"&&s.menuItems.push(r)}),s.open=!1,ge(s,1)}toggle(e){let t=this,{open:s}=t;s?t.hide(e):t.show(e)}show(e){let t=this,s=E(g.concat("btn-group").map(c=>`.${c}.${m}`).join(",")),o=s&&E(Z,s);o&&o[v].hide();let{element:i,menu:l,open:r}=t,h=i.parentNode;G.relatedTarget=e||null,h.dispatchEvent(G),!G.defaultPrevented&&(ee(t,1),S(l,m),S(h,m),i.setAttribute(J,!0),t.open=!r,setTimeout(()=>{D(l.getElementsByTagName("INPUT")[0]||i),me(t),fe.relatedTarget=e||null,h.dispatchEvent(fe)},1))}hide(e){let t=this,{element:s,menu:o,open:i}=t,l=s.parentNode;X.relatedTarget=e||null,l.dispatchEvent(X),!X.defaultPrevented&&(p(o,m),p(l,m),ee(t),s.setAttribute(J,!1),t.open=!i,D(s),setTimeout(()=>me(t),1),pe.relatedTarget=e||null,l.dispatchEvent(pe))}dispose(){let e=this,{element:t}=e;A(t.parentNode,m)&&e.open&&e.hide(),ge(e),super.dispose(v)}};B.init={component:v,selector:Z,constructor:B};var He="is-active",b=["is-active","bg-primary","text-white"],C="data-value",R=new WeakMap,k=class{#h;#t;#i;#n;#s;#e;#r;#o;constructor(e,t={}){e.style.display="none",R.set(e,this),this.#t=e;let s=i=>["true","false","1","0",!0,!1].includes(i)&&!!JSON.parse(i),o={...t,...e.dataset};for(this.allowNew=o.allowNew?s(o.allowNew):!1,this.showAllSuggestions=o.showAllSuggestions?s(o.showAllSuggestions):!1,this.badgeStyle=o.badgeStyle||"primary",this.allowClear=o.allowClear?s(o.allowClear):!1,this.server=o.server||!1,this.liveServer=o.liveServer?s(o.liveServer):!1,this.serverParams=o.serverParams||{},typeof this.serverParams=="string"&&(this.serverParams=JSON.parse(this.serverParams)),this.suggestionsThreshold=typeof o.suggestionsThreshold!="undefined"?parseInt(o.suggestionsThreshold):1,this.validationRegex=o.regex||"",this.separator=o.separator?o.separator.split("|"):[],this.max=o.max?parseInt(o.max):null,this.clearLabel=o.clearLabel||"Clear",this.searchLabel=o.searchLabel||"Type a value",this.placeholder=this.#m(),this.#r=!1,this.#o=!0,this.parentForm=e.parentElement;this.parentForm&&(this.parentForm=this.parentForm.parentElement,!(this.parentForm&&this.parentForm.nodeName=="FORM")););this.reset=this.reset.bind(this),this.parentForm&&this.parentForm.addEventListener("reset",this.reset),this.#i=document.createElement("div"),this.#n=document.createElement("div"),this.#s=document.createElement("ul"),this.#e=document.createElement("input"),this.#i.appendChild(this.#n),this.#n.appendChild(this.#e),this.#i.appendChild(this.#s),this.#t.parentNode.insertBefore(this.#i,this.#t.nextSibling),this.#v(),this.#g(),this.#b(),this.#y(),this.resetState(),this.server&&!this.liveServer?this.#u():this.resetSuggestions()}static init(e="select[multiple]",t={}){let s=document.querySelectorAll(e);for(let o=0;o<s.length;o++)k.getInstance(s[o])||new k(s[o],t)}static getInstance(e){if(R.has(e))return R.get(e)}dispose(){R.delete(this.#t),this.#t.style.display="block",this.#i.parentNode.removeChild(this.#i),this.parentForm&&this.parentForm.removeEventListener("reset",this.reset)}resetState(){this.isDisabled()?(this.#i.setAttribute("readonly",""),this.#e.setAttribute("disabled","")):(this.#i.hasAttribute("readonly")&&this.#i.removeAttribute("readonly"),this.#e.hasAttribute("disabled")&&this.#e.removeAttribute("disabled"))}resetSuggestions(){let e=Array.from(this.#t.querySelectorAll("option")).filter(t=>!t.disabled).map(t=>({value:t.getAttribute("value"),label:t.textContent}));this.#f(e)}#u(e=!1){this.#h&&this.#h.abort(),this.#h=new AbortController,this.serverParams.query=this.#e.value;let t=new URLSearchParams(this.serverParams).toString();fetch(this.server+"?"+t,{signal:this.#h.signal}).then(s=>s.json()).then(s=>{let o=s.data||s;this.#f(o),this.#h=null,e&&this.#c()}).catch(s=>{s.name!=="AbortError"&&console.error(s)})}#m(){if(this.#t.hasAttribute("placeholder"))return this.#t.getAttribute("placeholder");if(this.#t.dataset.placeholder)return this.#t.dataset.placeholder;let e=this.#t.querySelector("option");return e?(e.hasAttribute("selected")&&e.removeAttribute("selected"),e.value?"":e.textContent):""}#g(){this.#s.classList.add("dropdown-menu","p-0"),this.#s.style.maxHeight="280px",this.#s.style.overflowY="auto",this.#s.addEventListener("mouseenter",e=>{this.#r=!1})}#v(){this.#i.classList.add("form-control","dropdown"),this.#p()===4&&(this.#i.style.height="auto")}#b(){this.#n.addEventListener("click",t=>{this.isDisabled()||this.#e.style.visibility!="hidden"&&this.#e.focus()});let e=this.#t.selectedOptions;for(let t=0;t<e.length;t++){let s=e[t];!s.value||(s.dataset.init=1,this.addItem(s.textContent,s.value))}}#y(){this.#e.type="text",this.#e.autocomplete="off",this.#e.spellcheck=!1,this.#e.style.backgroundColor="transparent",this.#e.style.border=0,this.#e.style.outline=0,this.#e.style.maxWidth="100%",this.#e.ariaLabel=this.searchLabel,this.#d(!0),this.#e.addEventListener("input",e=>{if(e.data){let t=e.data.slice(-1);if(this.separator.length&&this.#e.value&&this.separator.includes(t)){this.#e.value=this.#e.value.slice(0,-1);let s=this.#e.value;if(!this.canAdd(s))return;this.addItem(s,null),this.#d();return}}this.#l(),this.#e.value.length>=this.suggestionsThreshold?this.liveServer?this.#u(!0):this.#c():this.#a()}),this.#e.addEventListener("focus",e=>{this.#e.value.length>=this.suggestionsThreshold&&this.#c()}),this.#e.addEventListener("focusout",e=>{this.#a()}),this.#e.addEventListener("keydown",e=>{switch(e.keyCode||e.key){case 13:case"Enter":e.preventDefault();let s=this.getActiveSelection();if(s)s.click();else if(this.allowNew&&this.#e.value){let i=this.#e.value;if(!this.canAdd(i))return;this.addItem(i,null),this.#d()}break;case 38:case"ArrowUp":e.preventDefault(),this.#r=!0;let o=this.#w();this.#e.value.length==0&&this.#s.classList.contains("show")&&!o&&this.#a();break;case 40:case"ArrowDown":e.preventDefault(),this.#r=!0,this.#E(),this.#e.value.length==0&&!this.#s.classList.contains("show")&&this.#c();break;case 8:case"Backspace":this.#e.value.length==0&&(this.removeLastItem(),this.#l(),this.#a());break;case 27:case"Escape":this.#a();break}})}#w(){let e=this.getActiveSelection();if(e){let t=e.parentNode;do t=t.previousSibling;while(t&&t.style.display=="none");return t?(e.classList.remove(...b),t.querySelector("a").classList.add(...b),t.parentNode.scrollTop=t.offsetTop-t.parentNode.offsetTop,t):null}return null}#E(){let e=this.getActiveSelection(),t=null;if(e){t=e.parentNode;do t=t.nextSibling;while(t&&t.style.display=="none");return t?(e.classList.remove(...b),t.querySelector("a").classList.add(...b),t.offsetTop>t.parentNode.offsetHeight-t.offsetHeight&&(t.parentNode.scrollTop+=t.offsetHeight),t):null}return t}#l(){this.#e.value?this.#e.size=this.#e.value.length+1:this.getSelectedValues().length?(this.#e.placeholder="",this.#e.size=1):(this.#e.size=this.placeholder.length>0?this.placeholder.length:1,this.#e.placeholder=this.placeholder)}#f(e=null){for(;this.#s.lastChild;)this.#s.removeChild(this.#s.lastChild);for(let t=0;t<e.length;t++){let s=e[t];if(!s.value)continue;let o=document.createElement("li"),i=document.createElement("a");if(o.append(i),i.classList.add("dropdown-item"),i.setAttribute(C,s.value),i.setAttribute("href","#"),i.textContent=s.label,s.data)for(let[l,r]of Object.entries(s.data))i.dataset[l]=r;this.#s.appendChild(o),i.addEventListener("mouseenter",l=>{this.#r||(this.removeActiveSelection(),o.querySelector("a").classList.add(...b))}),i.addEventListener("mousemove",l=>{this.#r=!1}),i.addEventListener("mousedown",l=>{l.preventDefault()}),i.addEventListener("click",l=>{l.preventDefault();let r=i.textContent;!this.canAdd(r,i.getAttribute(C))||(this.addItem(r,i.getAttribute(C),i.dataset),this.#d())})}}reset(){this.removeAll(),this.#o=!1;let e=this.#t.querySelectorAll("option[data-init]");for(let t=0;t<e.length;t++){let s=e[t];this.addItem(s.textContent,s.value)}this.#l(),this.#o=!0}#d(e=!1){this.#e.value="",this.#l(),e||(this.#a(),this.#e.dispatchEvent(new Event("input"))),this.max&&this.getSelectedValues().length===this.max?this.#e.style.visibility="hidden":this.#e.style.visibility=="hidden"&&(this.#e.style.visibility="visible"),this.isSingle()&&!e&&document.activeElement.blur()}getSelectedValues(){let e=this.#t.querySelectorAll("option[selected]");return Array.from(e).map(t=>t.value)}#c(){if(this.#e.style.visibility=="hidden")return;this.#s.style.left=this.#e.offsetLeft+"px";let e=this.#e.value.toLocaleLowerCase(),t=this.getSelectedValues(),s=this.#s.querySelectorAll("li"),o=!1,i=null,l=!1;for(let r=0;r<s.length;r++){let h=s[r],c=h.textContent.toLocaleLowerCase(),a=h.querySelector("a");if(a.classList.remove(...b),t.indexOf(a.getAttribute(C))!=-1){h.style.display="none";continue}l=!0;let f=e.length===0||c.indexOf(e)!==-1;this.showAllSuggestions||this.suggestionsThreshold===0||f?(h.style.display="list-item",o=!0,!i&&f&&(i=h)):h.style.display="none"}i?(this.#i.classList.remove("is-invalid"),i.querySelector("a").classList.add(...b),i.parentNode.scrollTop=i.offsetTop-i.parentNode.offsetTop):!this.allowNew&&!(e.length===0&&!l)?this.#i.classList.add("is-invalid"):this.validationRegex&&this.isInvalid()&&this.#i.classList.remove("is-invalid"),!o||this.isInvalid()?this.#s.classList.remove("show"):this.#s.classList.add("show")}#a(){this.#s.classList.remove("show"),this.#i.classList.remove("is-invalid"),this.removeActiveSelection()}#p(){let e=5;return window.jQuery&&$.fn.tooltip!=null&&$.fn.tooltip.Constructor!=null&&(e=parseInt($.fn.tooltip.Constructor.VERSION.charAt(0))),e}#S(e){let t=Array.from(this.#t.querySelectorAll("option")).find(s=>s.textContent==e);return!!(t&&t.getAttribute("selected"))}#A(e){return new RegExp(this.validationRegex.trim()).test(e)}getActiveSelection(){return this.#s.querySelector("a."+He)}removeActiveSelection(){let e=this.getActiveSelection();e&&e.classList.remove(...b)}removeAll(){this.getSelectedValues().forEach(t=>{this.removeItem(t)}),this.#l()}removeLastItem(e){e&&(this.#o=!1);let t=this.#n.querySelectorAll("span");if(!t.length)return;let s=t[t.length-1];this.removeItem(s.getAttribute(C)),this.#o=!0}isDisabled(){return this.#t.hasAttribute("disabled")||this.#t.disabled||this.#t.hasAttribute("readonly")}isInvalid(){return this.#i.classList.contains("is-invalid")}isSingle(){return!this.#t.hasAttribute("multiple")}canAdd(e,t=null){return t||(t=e),!e||this.isDisabled()||!this.isSingle()&&this.#S(t)||this.max&&this.getSelectedValues().length>=this.max?!1:this.validationRegex&&!this.#A(e)?(this.#i.classList.add("is-invalid"),!1):!0}addItem(e,t=null,s={}){t||(t=e),this.isSingle()&&this.getSelectedValues().length&&this.removeLastItem(!0);let o=this.#p(),i=this.#t.querySelector('option[value="'+t+'"]');i&&(s=i.dataset);let l=e,r=document.createElement("span"),h=["badge"],c=this.badgeStyle;if(s.badgeStyle&&(c=s.badgeStyle),s.badgeClass&&h.push(s.badgeClass),o===5?h=[...h,"me-2","bg-"+c]:h=[...h,"mr-2","badge-"+c],r.classList.add(...h),r.setAttribute(C,t),this.allowClear&&(l=(o===5?'<button type="button" style="font-size:0.65em" class="me-2 float-start btn-close btn-close-white" aria-label="'+this.clearLabel+'"></button>':'<button type="button" style="font-size:1em;float:left;text-shadow:none;color:currentColor;transform:scale(1.2)" class="mr-2 close" aria-label="'+this.clearLabel+'"><span aria-hidden="true">&times;</span></button>')+l),r.innerHTML=l,this.#n.insertBefore(r,this.#e),this.allowClear&&r.querySelector("button").addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),this.isDisabled()||(this.removeItem(t),document.activeElement.blur(),this.#l())}),!i){i=document.createElement("option"),i.value=t,i.textContent=e;for(let[a,f]of Object.entries(s))i.dataset[a]=f;this.#t.appendChild(i)}i.setAttribute("selected","selected"),i.selected=!0,this.#o&&this.#t.dispatchEvent(new Event("change",{bubbles:!0}))}removeItem(e){let t=this.#n.querySelector("span["+C+'="'+e+'"]');if(!t)return;t.remove();let s=this.#t.querySelector('option[value="'+e+'"]');s&&(s.removeAttribute("selected"),s.selected=!1,this.#o&&this.#t.dispatchEvent(new Event("change",{bubbles:!0}))),this.#e.style.visibility=="hidden"&&this.max&&this.getSelectedValues().length<this.max&&(this.#e.style.visibility="visible")}},ye=k;var Vt=ye;export{Vt as default};
//# sourceMappingURL=tags-standalone.min.js.map

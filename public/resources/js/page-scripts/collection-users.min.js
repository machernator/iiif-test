!function(){const e=document.getElementById("selectUsers"),t=document.getElementById("collectionUsersForm"),n=document.getElementById("collectionUsersTbl");if(!n)return;const s=n.querySelector("tbody"),r=document.getElementById("userTpl");new List("selectUsers",{valueNames:["fullname","username"]});e.addEventListener("pointerup",(function(e){const t=e.target.closest("li");if(t){const e=r.content.cloneNode(!0);e.querySelector("[data-username]").innerText=t.dataset.fullname;const n=e.querySelectorAll('input[type="radio"]'),o=t.dataset.userid;n.forEach((e=>{1==e.value&&(e.checked=!0),e.name+=`[${o}]`}));e.querySelector("[data-deletesecid]").dataset.deletesecid=o,s.prepend(e),Signals.dispatch("saveFormData",{},e)}})),n.addEventListener("pointerup",(function(e){const t=e.target.closest("button");if(t){const n={SEC_ID:t.dataset.deletesecid};fetch("/collusers",{method:"DELETE",body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{"errors"in e?console.log(e.errors):console.log(e)}));e.target.closest("tr").remove()}})),t.addEventListener("keydown",(e=>{if("Enter"===e.key?enterPressed=!0:enterPressed=!1,!0===enterPressed)return enterPressed=!1,!1})),t.addEventListener("change",(e=>Signals.dispatch("saveFormData",{},e.target))),t.addEventListener("submit",(e=>{e.preventDefault();const t=new FormData(e.target);fetch("/collusers",{method:"post",body:t}).then((e=>e.json())).then((e=>{"errors"in e?console.log(e.errors):console.log(e)}))})),Signals.add("saveFormData",(function(e){t.requestSubmit()}))}();
//# sourceMappingURL=collection-users.min.js.map
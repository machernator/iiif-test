!function(){window.SystematicsTree("thesaurusEditSelect",(function(e,t,a){const n=a.thesId;window.location.href=`/thesaurus/${n}/${e}`}));document.addEventListener("alpine:init",(()=>{Alpine.data("altNames",(function(){return{aliases:[],onAddAlias:function(e){const t=this.$refs.refLanguages,a=this.$refs.refAlias;return t.value?a.value?(this.aliases.unshift({alias_language:t.value,alias_name:a.value}),t.value="",a.value="",void this.$nextTick((()=>Signals.dispatch("saveFormData",{},e.target)))):(alert(a.dataset.msgnoalias),void a.focus()):(alert(t.dataset.msgnolanguage),void t.focus())},onDeleteAlias:function(e,t){this.aliases.splice(e,1),this.$nextTick((()=>Signals.dispatch("saveFormData",{},t)))}}}))}));document.getElementById("catSelect"),document.getElementById("newReference"),NHMSearch("thesaurusStorage",(function(t,a){CrudBox.addValue(e,a,t),Signals.dispatch("saveFormData",{},e)})),NHMSearch("cbSynonyms",(function(e,t){const a=this.querySelector(".syn-select");if("default"===a.value){const e=a.dataset.msgnocategory;return alert(e),void a.focus()}CrudBox.addValue(this,`${t}, ${a.value}`,e).querySelector('[name="quality[]"]').value=a.value,Signals.dispatch("saveFormData",{},this)}));const e=document.getElementById("thesaurusStorage"),t=document.getElementById("thesaurusNodeForm");if(t){let e=!1;t.addEventListener("keydown",(t=>{if(e="Enter"===t.key,!0===e)return e=!1,!1})),t.addEventListener("change",(e=>Signals.dispatch("saveFormData",{},e.target))),t.addEventListener("submit",(e=>{e.preventDefault();const t=new FormData(e.target);fetch("/thesaurus/save",{method:"post",body:t}).then((e=>e.json())).then((e=>{"errors"in e&&console.log(e.errors)}))}))}Signals.add("saveFormData",(function(e){this.getAttribute("data-nosaveonchange")||t.requestSubmit()})),Signals.add("onAdd_externalRefs",(function(e){const t=this.querySelector(".cat-select"),a=t.selectedOptions,n=e.newEl;if("default"===t.value){const e=t.dataset.msgnocategory;return alert(e),n.remove(),void t.focus()}const s=a[0].dataset.url,o=a[0].dataset.shortcode,r=document.getElementById("newReference"),u=n.querySelector('[name^="IDENTCAT_ID"]'),l=n.querySelector('[name^="identifier"]');let d;u.value=t.value,t.selectedIndex=null,l.value=r.value,s?(d=document.createElement("a"),d.href=s+r.value,d.target="_blank",d.innerText=o+" - "+r.value):d=document.createTextNode(o+" - "+r.value),n.querySelector(".crudbox-entry-text").appendChild(d)}));document.getElementById("addThesaurusNode"),document.getElementById("deleteThesaurusNode")}();
//# sourceMappingURL=thesaurus-edit.min.js.map
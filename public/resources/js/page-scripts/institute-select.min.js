!function(){NHMSearch("instituteEditSearch",(function(e,t){window.location.href=`/institute/${e}`}));const e=document.getElementById("instituteForm"),t=document.getElementById("selectedCity"),n=document.getElementById("cityName"),a=document.getElementById("deleteCity"),d=document.getElementById("cityEmptyMsg");if(e){NHMSearch("citySearch",(function(e,a){n.innerText=a,nodeIdCity.value=e,d.classList.add("d-none"),t.classList.remove("d-none"),Signals.dispatch("saveFormData",{},nodeIdCity)}));a.addEventListener("pointerdown",(function(e){n.innerText="",nodeIdCity.value="",d.classList.remove("d-none"),t.classList.add("d-none"),Signals.dispatch("saveFormData",{},nodeIdCity)}));let i=!1;e.addEventListener("keydown",(e=>{if(i="Enter"===e.key,!0===i)return i=!1,!1})),e.addEventListener("change",(e=>Signals.dispatch("saveFormData",{},e.target))),e.addEventListener("submit",(e=>{e.preventDefault();const t=new FormData(e.target);fetch("/institute/save",{method:"post",body:t}).then((e=>e.json())).then((e=>{"errors"in e?console.log(e.errors):s.innerText=e.institute_name}))}));const o=document.getElementById("instituteName"),s=document.getElementById("instituteNameHeading");o.addEventListener("input",(e=>{s.innerText=e.target.value})),Signals.add("onAdd_externalRefs",(function(e){const t=this.querySelector(".cat-select"),n=t.selectedOptions,a=e.newEl;if("default"===t.value){const e=t.dataset.msgnocategory;return alert(e),a.remove(),void t.focus()}const d=n[0].dataset.url,i=n[0].dataset.shortcode,o=document.getElementById("newReference"),s=a.querySelector('[name^="IDENTCAT_ID"]'),r=a.querySelector('[name^="identifier"]');s.value=t.value,t.selectedIndex=null,r.value=o.value;const c=document.createElement("a");c.href=d+o.value,c.target="_blank",c.innerText=i+" - "+o.value,a.querySelector(".crudbox-entry-text").appendChild(c)})),Signals.add("saveFormData",(function(t){e.requestSubmit()}))}}();
//# sourceMappingURL=institute-select.min.js.map
document.addEventListener("alpine:init",(i=>{Alpine.data("crudboxCoordinates",(function(){return{latitude:null,longitude:null,degNS:null,minNS:null,secNS:null,dirNS:null,degEW:null,minEW:null,secEW:null,dirEW:null,maxDecimals:6,map:{mapEl:null,defaultSrc:"",defaultHref:""},initFields(){this.longitude&&this.decimalToDMS(this.longitude,"longitude"),this.latitude&&this.decimalToDMS(this.latitude,"latitude")},decimalToDegrees(i){const t=i.target;let e=t.value;e=e.replace(",","."),e=e.replace(/[^-\d.]/g,"");const l=e.indexOf(".");-1!==l&&(e=e.slice(0,l+1)+e.slice(l+1).replace(/\./g,"")),e=e.replace(/-/g,((i,t)=>t>0?"":"-")),"latitude"===t.id?(this.latitude=e,this.degrees=this.decimalToDMS(this.latitude,"latitude")):"longitude"===t.id&&(this.longitude=e,this.decimalToDMS(this.longitude,"longitude")),Alpine.nextTick((()=>{Signals.dispatch("saveObject",{},null)}))},DMSToDecimal(i){const t=i.target,e=t.id;if("latDeg"===e||"latMin"===e||"latSec"===e||"lat-dir"===t.name){if(this.minNS&&!this.degNS)return;if(this.secNS&&(!this.degNS||!this.minNS))return;let i=0,t=0;this.minNS&&(i=this.minNS/60),this.secNS&&(t=this.secNS/3600);let e=Number(this.degNS)+i+t;"S"===this.dirNS&&(e*=-1),this.latitude=this.trimDecimals(e)}else{if(this.minEW&&!this.degEW)return;if(this.secEW&&(!this.degEW||!this.minEW))return;let i=0,t=0;this.minEW&&(i=this.minEW/60),this.secEW&&(t=this.secEW/3600);let e=Number(this.degEW)+i+t;"W"===this.dirEW&&(e*=-1),this.longitude=this.trimDecimals(e)}Alpine.nextTick((()=>{Signals.dispatch("saveObject",{},null)}))},decimalToDMS(i,t){const e=""===i;if(!e&&isNaN(i))return;const l=Math.abs(i),s=Math.floor(l),n=60*(l-s),a=Math.floor(n),d=Math.floor(60*(n-a)),u=i>=0?1:-1;"latitude"===t?(this.degNS=e?null:s,this.minNS=e?null:a,this.secNS=e?null:d,this.dirNS=u>0?"N":"S"):"longitude"===t&&(this.degEW=e?null:s,this.minEW=e?null:a,this.secEW=e?null:d,this.dirEW=u>0?"E":"W")},parseLocaleFloat(i){let t=i.target.value;const e=window.appDecimalPoint??",";t=window.FormUtilities.onlyNumbersAndOneComma(t,e),i.target.value=t},trimDecimals(i){const t=i.toString().split(".")[1];return t&&t.length>this.maxDecimals?i.toFixed(this.maxDecimals):i},initMap(){}}}))}));
//# sourceMappingURL=crudbox-coordinates.min.js.map
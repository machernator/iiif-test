window.addEventListener("alpine:init",(e=>{Alpine.store("objectRelation",{data:null,currText:null,currPid:null,language:"",messages:null,addRelationship(e){if(null===this.currPid)return;if(!e.value)return alert(this.messages.noCategory),void e.focus();if(this.checkDoubleEntries(e.value,this.currPid))return alert(this.messages.doubleEntry),void this.resetSelection();const t={RELCAT_ID:e.value,OBJ_ID_dest:this.currPid,PID_full:this.currText};t["category_"+this.language]=e.options[e.selectedIndex].text,this.data.unshift(t),e.selectedIndex=0,Alpine.nextTick((()=>{Signals.dispatch("saveObject",{},null)})),this.resetSelection()},deleteRelationship(e){this.data.splice(e,1),Alpine.nextTick((()=>{Signals.dispatch("saveObject",{},null)}))},resetSelection(){this.currPid=null,this.currText=null},checkDoubleEntries(e,t){for(let i=0;i<this.data.length;i++)if(this.data[i].RELCAT_ID==e&&this.data[i].REL_ID==t)return!0;return!1}}),rels=Alpine.store("objectRelation")})),NHMSearch("pidSearch",(function(e,t){rels.currPid=e,rels.currText=t}));
//# sourceMappingURL=crudbox-object-relationship.min.js.map